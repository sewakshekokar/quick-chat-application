{"ast":null,"code":"import moment from\"moment\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{uploadProfilePic}from\"../../apiCalls/users\";import{hideLoader,showLoader}from\"../../redux/loaderSlice\";import toast from\"react-hot-toast\";import{setUser}from\"../../redux/usersSlice\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const{user}=useSelector(state=>state.userReducer);const[image,setImage]=useState('');const dispatch=useDispatch();useEffect(()=>{if(user!==null&&user!==void 0&&user.profilePic){setImage(user.profilePic);}},[user]);function getInitials(){let f=user===null||user===void 0?void 0:user.firstname.toUpperCase()[0];let l=user===null||user===void 0?void 0:user.lastname.toUpperCase()[0];return f+l;}function getFullname(){let fname=(user===null||user===void 0?void 0:user.firstname.at(0).toUpperCase())+(user===null||user===void 0?void 0:user.firstname.slice(1).toLowerCase());let lname=(user===null||user===void 0?void 0:user.lastname.at(0).toUpperCase())+(user===null||user===void 0?void 0:user.lastname.slice(1).toLowerCase());return fname+' '+lname;}const onFileSelect=async e=>{const file=e.target.files[0];const reader=new FileReader(file);reader.readAsDataURL(file);reader.onloadend=async()=>{setImage(reader.result);};};const updateProfilePic=async()=>{try{dispatch(showLoader());const response=await uploadProfilePic(image);dispatch(hideLoader());if(response.success){toast.success(response.message);dispatch(setUser(response.data));}else{toast.error(response.message);}}catch(err){toast.error(err.message);dispatch(hideLoader());}};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-pic-container\",children:[image&&/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"Profile Pic\",className:\"user-profile-pic-upload\"}),!image&&/*#__PURE__*/_jsx(\"div\",{className:\"user-default-profile-avatar\",children:getInitials()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-profile-name\",children:/*#__PURE__*/_jsx(\"h1\",{children:getFullname()})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Email: \"}),\" \",user===null||user===void 0?void 0:user.email]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Account Created: \"}),moment(user===null||user===void 0?void 0:user.createdAt).format('MMM DD, YYYY')]}),/*#__PURE__*/_jsxs(\"div\",{className:\"select-profile-pic-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:onFileSelect}),/*#__PURE__*/_jsx(\"button\",{className:\"upload-image-btn\",onClick:updateProfilePic,children:\"Upload\"})]})]})]});}export default Profile;","map":{"version":3,"names":["moment","useEffect","useState","useDispatch","useSelector","uploadProfilePic","hideLoader","showLoader","toast","setUser","jsx","_jsx","jsxs","_jsxs","Profile","user","state","userReducer","image","setImage","dispatch","profilePic","getInitials","f","firstname","toUpperCase","l","lastname","getFullname","fname","at","slice","toLowerCase","lname","onFileSelect","e","file","target","files","reader","FileReader","readAsDataURL","onloadend","result","updateProfilePic","response","success","message","data","error","err","className","children","src","alt","email","createdAt","format","type","onChange","onClick"],"sources":["/Users/sewak/Desktop/quick-chat-application/client/src/pages/profile/index.js"],"sourcesContent":["import moment from \"moment\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { uploadProfilePic } from \"../../apiCalls/users\";\r\nimport { hideLoader, showLoader } from \"../../redux/loaderSlice\";\r\nimport toast from \"react-hot-toast\";\r\nimport { setUser } from \"../../redux/usersSlice\";\r\n\r\nfunction Profile(){\r\n    const { user } = useSelector(state => state.userReducer);\r\n    const [image, setImage] = useState('');\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        if(user?.profilePic){\r\n            setImage(user.profilePic);\r\n        }\r\n    }, [user])\r\n\r\n    function getInitials(){\r\n        let f = user?.firstname.toUpperCase()[0];\r\n        let l = user?.lastname.toUpperCase()[0];\r\n        return f + l;\r\n    }\r\n\r\n    function getFullname(){\r\n        let fname = user?.firstname.at(0).toUpperCase() + user?.firstname.slice(1).toLowerCase();\r\n        let lname = user?.lastname.at(0).toUpperCase() + user?.lastname.slice(1).toLowerCase();\r\n        return fname + ' ' + lname;\r\n    }\r\n\r\n    const onFileSelect = async (e) => {\r\n        const file = e.target.files[0];\r\n        const reader = new FileReader(file);\r\n\r\n        reader.readAsDataURL(file);\r\n\r\n        reader.onloadend = async () => {\r\n            setImage(reader.result);\r\n        }\r\n    }\r\n\r\n    const updateProfilePic = async () => {\r\n        \r\n        try{\r\n            dispatch(showLoader());\r\n            const response = await uploadProfilePic(image);\r\n            dispatch(hideLoader());\r\n\r\n            if(response.success){\r\n                toast.success(response.message);\r\n                dispatch(setUser(response.data));\r\n            }else{\r\n                toast.error(response.message);\r\n            }\r\n        }catch(err){\r\n            toast.error(err.message);\r\n            dispatch(hideLoader());\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"profile-page-container\">\r\n        <div className=\"profile-pic-container\">\r\n            {image && <img src={image} \r\n                 alt=\"Profile Pic\" \r\n                 className=\"user-profile-pic-upload\" \r\n            />}\r\n            {!image && <div className=\"user-default-profile-avatar\">\r\n                { getInitials() }\r\n            </div>}\r\n        </div>\r\n\r\n        <div className=\"profile-info-container\">\r\n            <div className=\"user-profile-name\">\r\n                <h1>{ getFullname() }</h1>\r\n            </div>\r\n            <div>\r\n                <b>Email: </b> { user?.email}\r\n            </div>\r\n            <div>\r\n                <b>Account Created: </b>{moment(user?.createdAt).format('MMM DD, YYYY')}\r\n            </div>\r\n            <div className=\"select-profile-pic-container\">\r\n                <input type=\"file\" onChange={ onFileSelect } />\r\n                <button className=\"upload-image-btn\" onClick={updateProfilePic}>\r\n                    Upload\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}